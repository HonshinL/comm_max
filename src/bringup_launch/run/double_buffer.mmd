sequenceDiagram
    participant Producer as ProducerNode
    participant Buffer as DoubleBuffer
    participant Consumer as ConsumerNode

    Producer->>Buffer: write(data) → 写入 back 缓冲区
    Note right of Buffer: back 缓冲区更新<br/>dirty = true

    Producer->>Consumer: 发布 tick 消息 (触发回调)

    Consumer->>Buffer: read() → 读取 front 缓冲区
    Note right of Buffer: front 缓冲区保持稳定数据

    Consumer->>Buffer: swap() → 交换 front/back
    Note right of Buffer: front ↔ back 切换<br/>dirty = false

    Consumer->>Consumer: 使用最新 front 数据
